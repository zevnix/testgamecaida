<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Caída del Duro</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>

  <!-- Barra superior -->
  <header class="topbar">
    <input id="url" class="input" title="Supabase URL" />
    <input id="username" class="input" placeholder="usuario" autocomplete="username" />
    <input id="pin" class="input" placeholder="pin" type="password" autocomplete="current-password" />
    <button id="btnLogin" class="btn">Login/Register</button>

    <select id="mode" class="input" title="Modo de partida">
      <option value="1v1">1v1</option>
    </select>

    <button id="btnStart" class="btn">Start match</button>
    <button id="btnFinish" class="btn danger">Finish match</button>
  </header>

  <!-- Layout principal -->
  <main class="layout">

    <!-- Lienzo del juego -->
    <div style="position:relative">
      <!-- tabindex permite que el canvas reciba el foco de teclado -->
      <canvas id="canvas" tabindex="0" aria-label="Zona de juego"></canvas>

      <!-- Leyenda de teclas (opcional) -->
      <div class="keybar" aria-hidden="true">
        <span class="k">WASD / ←↑→↓</span>
        <span class="k">Espacio: Fuego</span>
        <span class="k">X: Especial</span>
        <span class="k">P / Esc: Pausa</span>
        <span class="k">Enter: Aceptar</span>
      </div>
    </div>

    <!-- Panel derecho -->
    <aside class="panel">
      <section>
        <h3>Estado</h3>
        <pre id="state"></pre>
      </section>

      <section>
        <h3>Leaderboard</h3>
        <button id="btnLb" class="btn small">Refrescar</button>
        <pre id="lb"></pre>
      </section>

      <section>
        <h3>Log</h3>
        <pre id="log"></pre>
      </section>
    </aside>
  </main>

  <!-- ========================= Overlays ========================= -->

  <!-- Pausa -->
  <div id="ovPause" class="overlay" role="dialog" aria-modal="true" aria-labelledby="ovPauseTitle">
    <div class="ov-card">
      <h2 id="ovPauseTitle" class="ov-title">Pausa</h2>
      <p class="ov-desc">El juego está detenido.</p>
      <div class="ov-actions">
        <button id="btnResume"  class="btn">Reanudar</button>
        <button id="btnRestart" class="btn">Reiniciar</button>
        <button id="btnExit"    class="btn danger">Salir</button>
      </div>
    </div>
  </div>

  <!-- Victoria -->
  <div id="ovWin" class="overlay" role="dialog" aria-modal="true" aria-labelledby="ovWinTitle">
    <div class="ov-card">
      <h2 id="ovWinTitle" class="ov-title">¡Victoria!</h2>
      <p id="ovWinText" class="ov-desc">Has completado el objetivo.</p>
      <div class="ov-actions">
        <button id="btnNext"  class="btn">Siguiente</button>
        <button id="btnExitW" class="btn danger">Salir</button>
      </div>
    </div>
  </div>

  <!-- Game Over -->
  <div id="ovLose" class="overlay" role="dialog" aria-modal="true" aria-labelledby="ovLoseTitle">
    <div class="ov-card">
      <h2 id="ovLoseTitle" class="ov-title">Game Over</h2>
      <p id="ovLoseText" class="ov-desc">Se acabaron las vidas o el tiempo.</p>
      <div class="ov-actions">
        <button id="btnRetry" class="btn">Reintentar</button>
        <button id="btnExitL" class="btn danger">Salir</button>
      </div>
    </div>
  </div>

  <!-- Script principal -->
  <script type="module" src="/src/main.js"></script>
</body>
</html>
